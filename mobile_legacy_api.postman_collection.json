{
  "info": {
    "name": "Mobile Legacy Format API",
    "description": "Comprehensive Postman collection for Mobile Legacy Format API endpoints",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "1.0.0"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3000/api",
      "type": "string"
    },
    {
      "key": "logoId",
      "value": "bdd8c50a-383c-44c4-a212-ede3c06e6102",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Mobile Legacy Format Endpoints",
      "item": [
        {
          "name": "Get All Logos (Legacy Format)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept-Language",
                "value": "en"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/logo/mobile/legacy?page=1&limit=10&lang=en",
              "host": ["{{baseUrl}}"],
              "path": ["logo", "mobile", "legacy"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number for pagination"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Number of logos per page (max 100)"
                },
                {
                  "key": "lang",
                  "value": "en",
                  "description": "Language preference (en/ar)"
                }
              ]
            },
            "description": "Retrieves all logos that support legacy format in mobile-compatible JSON structure with pagination support."
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/logo/mobile/legacy?page=1&limit=10&lang=en",
                  "host": ["{{baseUrl}}"],
                  "path": ["logo", "mobile", "legacy"],
                  "query": [
                    {
                      "key": "page",
                      "value": "1"
                    },
                    {
                      "key": "limit",
                      "value": "10"
                    },
                    {
                      "key": "lang",
                      "value": "en"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"success\": true,\n  \"message\": \"Logos fetched in legacy format successfully\",\n  \"language\": \"en\",\n  \"direction\": \"ltr\",\n  \"data\": {\n    \"data\": [\n      {\n        \"logoId\": \"bdd8c50a-383c-44c4-a212-ede3c06e6102\",\n        \"templateId\": null,\n        \"userId\": \"current_user\",\n        \"name\": \"working_logo_test\",\n        \"description\": \"Logo created on 2025-10-21T06:16:02.171Z\",\n        \"canvas\": {\n          \"aspectRatio\": 1.0,\n          \"background\": {\n            \"type\": \"solid\",\n            \"solidColor\": \"#ffffff\",\n            \"gradient\": null,\n            \"image\": null\n          }\n        },\n        \"layers\": [],\n        \"colorsUsed\": [],\n        \"alignments\": {\n          \"verticalAlign\": \"center\",\n          \"horizontalAlign\": \"center\"\n        },\n        \"responsive\": {\n          \"version\": \"3.0\",\n          \"description\": \"Fully responsive logo data - no absolute sizes stored\",\n          \"scalingMethod\": \"scaleFactor\",\n          \"positionMethod\": \"relative\",\n          \"fullyResponsive\": true\n        },\n        \"metadata\": {\n          \"createdAt\": \"2025-10-21T06:16:02.171Z\",\n          \"updatedAt\": \"2025-10-21T06:16:02.171Z\",\n          \"tags\": [\"logo\", \"design\", \"responsive\"],\n          \"version\": 3,\n          \"responsive\": true,\n          \"legacyFormat\": true,\n          \"legacyVersion\": \"1.0\",\n          \"mobileOptimized\": true\n        },\n        \"export\": {\n          \"format\": \"png\",\n          \"transparentBackground\": true,\n          \"quality\": 100,\n          \"responsive\": {\n            \"scalable\": true,\n            \"maintainAspectRatio\": true\n          }\n        },\n        \"language\": \"en\",\n        \"direction\": \"ltr\"\n      }\n    ],\n    \"pagination\": {\n      \"page\": 1,\n      \"limit\": 10,\n      \"total\": 81,\n      \"pages\": 9\n    }\n  }\n}"
            }
          ]
        },
        {
          "name": "Get All Logos (Legacy Format) - Arabic",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept-Language",
                "value": "ar"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/logo/mobile/legacy?page=1&limit=10&lang=ar",
              "host": ["{{baseUrl}}"],
              "path": ["logo", "mobile", "legacy"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "lang",
                  "value": "ar"
                }
              ]
            },
            "description": "Retrieves all logos in Arabic language with RTL direction support."
          }
        },
        {
          "name": "Get All Logos (Legacy Format) - Pagination",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/logo/mobile/legacy?page=2&limit=5&lang=en",
              "host": ["{{baseUrl}}"],
              "path": ["logo", "mobile", "legacy"],
              "query": [
                {
                  "key": "page",
                  "value": "2",
                  "description": "Second page"
                },
                {
                  "key": "limit",
                  "value": "5",
                  "description": "5 logos per page"
                },
                {
                  "key": "lang",
                  "value": "en"
                }
              ]
            },
            "description": "Example of pagination with page 2 and 5 logos per page."
          }
        },
        {
          "name": "Get Single Logo (Legacy Format)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept-Language",
                "value": "en"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/logo/{{logoId}}/mobile/legacy?lang=en",
              "host": ["{{baseUrl}}"],
              "path": ["logo", "{{logoId}}", "mobile", "legacy"],
              "query": [
                {
                  "key": "lang",
                  "value": "en",
                  "description": "Language preference"
                }
              ]
            },
            "description": "Retrieves a specific logo by ID in mobile legacy format with comprehensive layer data."
          },
          "response": [
            {
              "name": "Success Response",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/logo/{{logoId}}/mobile/legacy?lang=en",
                  "host": ["{{baseUrl}}"],
                  "path": ["logo", "{{logoId}}", "mobile", "legacy"],
                  "query": [
                    {
                      "key": "lang",
                      "value": "en"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"success\": true,\n  \"message\": \"Logo fetched in legacy format successfully\",\n  \"language\": \"en\",\n  \"direction\": \"ltr\",\n  \"data\": {\n    \"logoId\": \"bdd8c50a-383c-44c4-a212-ede3c06e6102\",\n    \"templateId\": null,\n    \"userId\": \"current_user\",\n    \"name\": \"working_logo_test\",\n    \"description\": \"Logo created on 2025-10-21T06:16:02.171Z\",\n    \"canvas\": {\n      \"aspectRatio\": 1.0,\n      \"background\": {\n        \"type\": \"solid\",\n        \"solidColor\": \"#ffffff\",\n        \"gradient\": null,\n        \"image\": null\n      }\n    },\n    \"layers\": [\n      {\n        \"layerId\": \"layer-uuid-here\",\n        \"type\": \"text\",\n        \"visible\": true,\n        \"order\": 0,\n        \"position\": {\n          \"x\": 0.5,\n          \"y\": 0.5\n        },\n        \"scaleFactor\": 1.0,\n        \"rotation\": 0,\n        \"opacity\": 1.0,\n        \"flip\": {\n          \"horizontal\": false,\n          \"vertical\": false\n        },\n        \"text\": {\n          \"value\": \"Sample Text\",\n          \"font\": \"Arial\",\n          \"fontSize\": 48,\n          \"fontColor\": \"#000000\",\n          \"fontWeight\": \"normal\",\n          \"fontStyle\": \"normal\",\n          \"alignment\": \"center\",\n          \"baseline\": \"alphabetic\",\n          \"lineHeight\": 1.0,\n          \"letterSpacing\": 0,\n          \"fillAlpha\": 1.0,\n          \"strokeHex\": null,\n          \"strokeAlpha\": null,\n          \"strokeWidth\": null,\n          \"strokeAlign\": null,\n          \"gradient\": null,\n          \"underline\": false,\n          \"underlineDirection\": \"horizontal\",\n          \"textCase\": \"normal\",\n          \"textDecoration\": \"none\",\n          \"textTransform\": \"none\",\n          \"fontVariant\": \"normal\"\n        }\n      }\n    ],\n    \"colorsUsed\": [\n      {\n        \"role\": \"text\",\n        \"color\": \"#000000\"\n      }\n    ],\n    \"alignments\": {\n      \"verticalAlign\": \"center\",\n      \"horizontalAlign\": \"center\"\n    },\n    \"responsive\": {\n      \"version\": \"3.0\",\n      \"description\": \"Fully responsive logo data - no absolute sizes stored\",\n      \"scalingMethod\": \"scaleFactor\",\n      \"positionMethod\": \"relative\",\n      \"fullyResponsive\": true\n    },\n    \"metadata\": {\n      \"createdAt\": \"2025-10-21T06:16:02.171Z\",\n      \"updatedAt\": \"2025-10-21T06:16:02.171Z\",\n      \"tags\": [\"logo\", \"design\", \"responsive\"],\n      \"version\": 3,\n      \"responsive\": true,\n      \"legacyFormat\": true,\n      \"legacyVersion\": \"1.0\",\n      \"mobileOptimized\": true\n    },\n    \"export\": {\n      \"format\": \"png\",\n      \"transparentBackground\": true,\n      \"quality\": 100,\n      \"responsive\": {\n        \"scalable\": true,\n        \"maintainAspectRatio\": true\n      }\n    },\n    \"language\": \"en\",\n    \"direction\": \"ltr\"\n  }\n}"
            }
          ]
        },
        {
          "name": "Get Single Logo (Legacy Format) - Arabic",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Accept-Language",
                "value": "ar"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/logo/{{logoId}}/mobile/legacy?lang=ar",
              "host": ["{{baseUrl}}"],
              "path": ["logo", "{{logoId}}", "mobile", "legacy"],
              "query": [
                {
                  "key": "lang",
                  "value": "ar"
                }
              ]
            },
            "description": "Retrieves a specific logo in Arabic with RTL direction support."
          }
        }
      ]
    },
    {
      "name": "Error Handling Tests",
      "item": [
        {
          "name": "Invalid Logo ID Format",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/logo/invalid-id/mobile/legacy",
              "host": ["{{baseUrl}}"],
              "path": ["logo", "invalid-id", "mobile", "legacy"]
            },
            "description": "Tests error handling for invalid logo ID format."
          },
          "response": [
            {
              "name": "Bad Request Response",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/logo/invalid-id/mobile/legacy",
                  "host": ["{{baseUrl}}"],
                  "path": ["logo", "invalid-id", "mobile", "legacy"]
                }
              },
              "status": "Bad Request",
              "code": 400,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"success\": false,\n  \"message\": \"Invalid logo ID format\",\n  \"language\": \"en\",\n  \"direction\": \"ltr\"\n}"
            }
          ]
        },
        {
          "name": "Logo Not Found",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/logo/00000000-0000-0000-0000-000000000000/mobile/legacy",
              "host": ["{{baseUrl}}"],
              "path": ["logo", "00000000-0000-0000-0000-000000000000", "mobile", "legacy"]
            },
            "description": "Tests error handling for non-existent logo ID."
          },
          "response": [
            {
              "name": "Not Found Response",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/logo/00000000-0000-0000-0000-000000000000/mobile/legacy",
                  "host": ["{{baseUrl}}"],
                  "path": ["logo", "00000000-0000-0000-0000-000000000000", "mobile", "legacy"]
                }
              },
              "status": "Not Found",
              "code": 404,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"success\": false,\n  \"message\": \"Logo not found\",\n  \"language\": \"en\",\n  \"direction\": \"ltr\"\n}"
            }
          ]
        },
        {
          "name": "Logo Not Supporting Legacy Format",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/logo/legacy-unsupported-id/mobile/legacy",
              "host": ["{{baseUrl}}"],
              "path": ["logo", "legacy-unsupported-id", "mobile", "legacy"]
            },
            "description": "Tests error handling for logo that doesn't support legacy format."
          },
          "response": [
            {
              "name": "Bad Request Response",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/logo/legacy-unsupported-id/mobile/legacy",
                  "host": ["{{baseUrl}}"],
                  "path": ["logo", "legacy-unsupported-id", "mobile", "legacy"]
                }
              },
              "status": "Bad Request",
              "code": 400,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"success\": false,\n  \"message\": \"This logo does not support legacy format\",\n  \"language\": \"en\",\n  \"direction\": \"ltr\"\n}"
            }
          ]
        }
      ]
    },
    {
      "name": "Performance Tests",
      "item": [
        {
          "name": "Large Page Size Test",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/logo/mobile/legacy?page=1&limit=100&lang=en",
              "host": ["{{baseUrl}}"],
              "path": ["logo", "mobile", "legacy"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "100",
                  "description": "Maximum allowed page size"
                },
                {
                  "key": "lang",
                  "value": "en"
                }
              ]
            },
            "description": "Tests performance with maximum page size (100 logos)."
          }
        },
        {
          "name": "Response Time Test",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/logo/{{logoId}}/mobile/legacy?lang=en",
              "host": ["{{baseUrl}}"],
              "path": ["logo", "{{logoId}}", "mobile", "legacy"],
              "query": [
                {
                  "key": "lang",
                  "value": "en"
                }
              ]
            },
            "description": "Tests response time for single logo retrieval."
          }
        }
      ]
    },
    {
      "name": "Legacy Format Validation",
      "item": [
        {
          "name": "Validate Legacy Format Structure",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/logo/{{logoId}}/mobile/legacy?lang=en",
              "host": ["{{baseUrl}}"],
              "path": ["logo", "{{logoId}}", "mobile", "legacy"],
              "query": [
                {
                  "key": "lang",
                  "value": "en"
                }
              ]
            },
            "description": "Validates that the response follows the legacy format structure with all required fields."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Response has success field\", function () {",
                  "    pm.expect(pm.response.json()).to.have.property('success');",
                  "    pm.expect(pm.response.json().success).to.be.true;",
                  "});",
                  "",
                  "pm.test(\"Response has data field\", function () {",
                  "    pm.expect(pm.response.json()).to.have.property('data');",
                  "});",
                  "",
                  "pm.test(\"Data has required legacy format fields\", function () {",
                  "    const data = pm.response.json().data;",
                  "    pm.expect(data).to.have.property('logoId');",
                  "    pm.expect(data).to.have.property('canvas');",
                  "    pm.expect(data).to.have.property('layers');",
                  "    pm.expect(data).to.have.property('colorsUsed');",
                  "    pm.expect(data).to.have.property('alignments');",
                  "    pm.expect(data).to.have.property('responsive');",
                  "    pm.expect(data).to.have.property('metadata');",
                  "    pm.expect(data).to.have.property('export');",
                  "});",
                  "",
                  "pm.test(\"Metadata has legacy format flags\", function () {",
                  "    const metadata = pm.response.json().data.metadata;",
                  "    pm.expect(metadata).to.have.property('legacyFormat');",
                  "    pm.expect(metadata.legacyFormat).to.be.true;",
                  "    pm.expect(metadata).to.have.property('legacyVersion');",
                  "    pm.expect(metadata).to.have.property('mobileOptimized');",
                  "    pm.expect(metadata.mobileOptimized).to.be.true;",
                  "});",
                  "",
                  "pm.test(\"Response time is less than 2000ms\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(2000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "Validate Gradient Legacy Format",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/logo/{{logoId}}/mobile/legacy?lang=en",
              "host": ["{{baseUrl}}"],
              "path": ["logo", "{{logoId}}", "mobile", "legacy"],
              "query": [
                {
                  "key": "lang",
                  "value": "en"
                }
              ]
            },
            "description": "Validates that gradients are in legacy format with proper structure."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Gradients are in legacy format\", function () {",
                  "    const data = pm.response.json().data;",
                  "    ",
                  "    // Check canvas background gradient",
                  "    if (data.canvas.background.gradient) {",
                  "        const gradient = data.canvas.background.gradient;",
                  "        pm.expect(gradient).to.have.property('angle');",
                  "        pm.expect(gradient).to.have.property('stops');",
                  "        pm.expect(gradient.stops).to.be.an('array');",
                  "        ",
                  "        gradient.stops.forEach(stop => {",
                  "            pm.expect(stop).to.have.property('color');",
                  "            pm.expect(stop).to.have.property('position');",
                  "        });",
                  "    }",
                  "    ",
                  "    // Check layer gradients",
                  "    data.layers.forEach(layer => {",
                  "        if (layer.text && layer.text.gradient) {",
                  "            const gradient = layer.text.gradient;",
                  "            pm.expect(gradient).to.have.property('angle');",
                  "            pm.expect(gradient).to.have.property('stops');",
                  "        }",
                  "    });",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Set default values if not already set",
          "if (!pm.environment.get('baseUrl')) {",
          "    pm.environment.set('baseUrl', 'http://localhost:3000/api');",
          "}",
          "",
          "if (!pm.environment.get('logoId')) {",
          "    pm.environment.set('logoId', 'bdd8c50a-383c-44c4-a212-ede3c06e6102');",
          "}"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Global test for all requests",
          "pm.test(\"Response status code is successful\", function () {",
          "    pm.expect(pm.response.code).to.be.oneOf([200, 201, 202]);",
          "});",
          "",
          "pm.test(\"Response has proper content type\", function () {",
          "    pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
          "});",
          "",
          "pm.test(\"Response time is reasonable\", function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(5000);",
          "});"
        ]
      }
    }
  ]
}
