{
    "info": {
        "name": "Logo Maker - Authentication API (New)",
        "description": "Complete authentication API collection with OTP-based registration and password reset",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
        "version": "2.0.0"
    },
    "variable": [{
            "key": "baseUrl",
            "value": "http://localhost:3000",
            "type": "string"
        },
        {
            "key": "token",
            "value": "",
            "type": "string"
        },
        {
            "key": "resetToken",
            "value": "",
            "type": "string"
        }
    ],
    "item": [{
            "name": "Registration",
            "item": [{
                    "name": "Register - Step 1: Request OTP",
                    "event": [{
                        "listen": "test",
                        "script": {
                            "exec": [
                                "pm.test(\"Status code is 200\", function () {",
                                "    pm.response.to.have.status(200);",
                                "});",
                                "",
                                "pm.test(\"Response has success field\", function () {",
                                "    const jsonData = pm.response.json();",
                                "    pm.expect(jsonData).to.have.property('success');",
                                "    pm.expect(jsonData.success).to.be.true;",
                                "});"
                            ],
                            "type": "text/javascript"
                        }
                    }],
                    "request": {
                        "method": "POST",
                        "header": [{
                            "key": "Content-Type",
                            "value": "application/json"
                        }],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"name\": \"John Doe\",\n    \"email\": \"john.doe@example.com\",\n    \"password\": \"password123\"\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/auth/register",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "auth",
                                "register"
                            ]
                        },
                        "description": "Step 1: Register a new user. Sends OTP to email. Requires: name, email, password"
                    },
                    "response": []
                },
                {
                    "name": "Register - Step 2: Verify OTP",
                    "event": [{
                        "listen": "test",
                        "script": {
                            "exec": [
                                "if (pm.response.code === 201) {",
                                "    const jsonData = pm.response.json();",
                                "    if (jsonData.success && jsonData.data && jsonData.data.token) {",
                                "        pm.collectionVariables.set(\"token\", jsonData.data.token);",
                                "        console.log(\"Token saved:\", jsonData.data.token);",
                                "    }",
                                "}",
                                "",
                                "pm.test(\"Status code is 201\", function () {",
                                "    pm.response.to.have.status(201);",
                                "});",
                                "",
                                "pm.test(\"Response includes user and token\", function () {",
                                "    const jsonData = pm.response.json();",
                                "    pm.expect(jsonData).to.have.property('success');",
                                "    pm.expect(jsonData.success).to.be.true;",
                                "    pm.expect(jsonData.data).to.have.property('user');",
                                "    pm.expect(jsonData.data).to.have.property('token');",
                                "});"
                            ],
                            "type": "text/javascript"
                        }
                    }],
                    "request": {
                        "method": "POST",
                        "header": [{
                            "key": "Content-Type",
                            "value": "application/json"
                        }],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"email\": \"john.doe@example.com\",\n    \"code\": \"123456\"\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/auth/register/verify-otp",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "auth",
                                "register",
                                "verify-otp"
                            ]
                        },
                        "description": "Step 2: Verify OTP code and complete registration. Only requires: email and code (OTP from email). Registration data (name, password) is retrieved from stored metadata. Returns user data and JWT token."
                    },
                    "response": []
                }
            ],
            "description": "Registration flow with OTP verification"
        },
        {
            "name": "Login",
            "item": [{
                "name": "Login with Email and Password",
                "event": [{
                    "listen": "test",
                    "script": {
                        "exec": [
                            "if (pm.response.code === 200) {",
                            "    const jsonData = pm.response.json();",
                            "    if (jsonData.success && jsonData.data && jsonData.data.token) {",
                            "        pm.collectionVariables.set(\"token\", jsonData.data.token);",
                            "        console.log(\"Token saved:\", jsonData.data.token);",
                            "    }",
                            "}",
                            "",
                            "pm.test(\"Status code is 200\", function () {",
                            "    pm.response.to.have.status(200);",
                            "});",
                            "",
                            "pm.test(\"Response includes user and token\", function () {",
                            "    const jsonData = pm.response.json();",
                            "    pm.expect(jsonData).to.have.property('success');",
                            "    pm.expect(jsonData.success).to.be.true;",
                            "    pm.expect(jsonData.data).to.have.property('user');",
                            "    pm.expect(jsonData.data).to.have.property('token');",
                            "});"
                        ],
                        "type": "text/javascript"
                    }
                }],
                "request": {
                    "method": "POST",
                    "header": [{
                        "key": "Content-Type",
                        "value": "application/json"
                    }],
                    "body": {
                        "mode": "raw",
                        "raw": "{\n    \"email\": \"john.doe@example.com\",\n    \"password\": \"password123\"\n}"
                    },
                    "url": {
                        "raw": "{{baseUrl}}/api/auth/login",
                        "host": [
                            "{{baseUrl}}"
                        ],
                        "path": [
                            "api",
                            "auth",
                            "login"
                        ]
                    },
                    "description": "Login with email and password. Returns user data and JWT token."
                },
                "response": []
            }],
            "description": "Simple email/password login"
        },
        {
            "name": "Password Reset",
            "item": [{
                    "name": "Reset Password - Step 1: Request OTP",
                    "event": [{
                        "listen": "test",
                        "script": {
                            "exec": [
                                "pm.test(\"Status code is 200\", function () {",
                                "    pm.response.to.have.status(200);",
                                "});",
                                "",
                                "pm.test(\"Response has success field\", function () {",
                                "    const jsonData = pm.response.json();",
                                "    pm.expect(jsonData).to.have.property('success');",
                                "    pm.expect(jsonData.success).to.be.true;",
                                "});"
                            ],
                            "type": "text/javascript"
                        }
                    }],
                    "request": {
                        "method": "POST",
                        "header": [{
                            "key": "Content-Type",
                            "value": "application/json"
                        }],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"email\": \"john.doe@example.com\"\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/auth/reset-password/request-otp",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "auth",
                                "reset-password",
                                "request-otp"
                            ]
                        },
                        "description": "Step 1: Request password reset OTP. Sends OTP code to email. Requires: email"
                    },
                    "response": []
                },
                {
                    "name": "Reset Password - Step 2: Verify Reset Code",
                    "event": [{
                        "listen": "test",
                        "script": {
                            "exec": [
                                "if (pm.response.code === 200) {",
                                "    const jsonData = pm.response.json();",
                                "    if (jsonData.success && jsonData.data && jsonData.data.token) {",
                                "        pm.collectionVariables.set(\"resetToken\", jsonData.data.token);",
                                "        console.log(\"Reset token saved:\", jsonData.data.token);",
                                "    }",
                                "}",
                                "",
                                "pm.test(\"Status code is 200\", function () {",
                                "    pm.response.to.have.status(200);",
                                "});",
                                "",
                                "pm.test(\"Response includes reset token\", function () {",
                                "    const jsonData = pm.response.json();",
                                "    pm.expect(jsonData).to.have.property('success');",
                                "    pm.expect(jsonData.success).to.be.true;",
                                "    pm.expect(jsonData.data).to.have.property('token');",
                                "});"
                            ],
                            "type": "text/javascript"
                        }
                    }],
                    "request": {
                        "method": "POST",
                        "header": [{
                            "key": "Content-Type",
                            "value": "application/json"
                        }],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"email\": \"john.doe@example.com\",\n    \"code\": \"123456\"\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/auth/verify-reset-code",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "auth",
                                "verify-reset-code"
                            ]
                        },
                        "description": "Step 2: Verify reset code and get temporary token. Requires: email, code (OTP from email). Returns a short-lived token (15 minutes) that must be used in Step 3 to reset the password."
                    },
                    "response": []
                },
                {
                    "name": "Reset Password - Step 3: Reset Password with Token",
                    "event": [{
                        "listen": "test",
                        "script": {
                            "exec": [
                                "pm.test(\"Status code is 200\", function () {",
                                "    pm.response.to.have.status(200);",
                                "});",
                                "",
                                "pm.test(\"Response indicates success\", function () {",
                                "    const jsonData = pm.response.json();",
                                "    pm.expect(jsonData).to.have.property('success');",
                                "    pm.expect(jsonData.success).to.be.true;",
                                "});"
                            ],
                            "type": "text/javascript"
                        }
                    }],
                    "request": {
                        "method": "POST",
                        "header": [{
                            "key": "Content-Type",
                            "value": "application/json"
                        }],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"token\": \"{{resetToken}}\",\n    \"newPassword\": \"newpassword123\"\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/auth/reset-password",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "auth",
                                "reset-password"
                            ]
                        },
                        "description": "Step 3: Reset password using the temporary token from Step 2. Requires: token (from Step 2), newPassword. The token expires after 15 minutes."
                    },
                    "response": []
                },
                {
                    "name": "Reset Password - Verify OTP (Deprecated)",
                    "event": [{
                        "listen": "test",
                        "script": {
                            "exec": [
                                "pm.test(\"Status code is 200\", function () {",
                                "    pm.response.to.have.status(200);",
                                "});",
                                "",
                                "pm.test(\"Response indicates success\", function () {",
                                "    const jsonData = pm.response.json();",
                                "    pm.expect(jsonData).to.have.property('success');",
                                "    pm.expect(jsonData.success).to.be.true;",
                                "});"
                            ],
                            "type": "text/javascript"
                        }
                    }],
                    "request": {
                        "method": "POST",
                        "header": [{
                            "key": "Content-Type",
                            "value": "application/json"
                        }],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"email\": \"john.doe@example.com\",\n    \"code\": \"123456\",\n    \"newPassword\": \"newpassword123\"\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/auth/reset-password/verify-otp",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "auth",
                                "reset-password",
                                "verify-otp"
                            ]
                        },
                        "description": "⚠️ DEPRECATED: This endpoint is deprecated. Use the new 3-step flow: Step 1 (Request OTP) → Step 2 (Verify Reset Code) → Step 3 (Reset Password). This endpoint verifies OTP and sets password in a single request. Requires: email, code (OTP from email), newPassword"
                    },
                    "response": []
                }
            ],
            "description": "Password reset flow with OTP verification (3 steps): Step 1 - Request OTP, Step 2 - Verify Reset Code (get token), Step 3 - Reset Password (use token). The old single-step endpoint is kept for backward compatibility but is deprecated."
        },
        {
            "name": "User Profile",
            "item": [{
                    "name": "Get Current User",
                    "event": [{
                        "listen": "test",
                        "script": {
                            "exec": [
                                "pm.test(\"Status code is 200\", function () {",
                                "    pm.response.to.have.status(200);",
                                "});",
                                "",
                                "pm.test(\"Response includes user data\", function () {",
                                "    const jsonData = pm.response.json();",
                                "    pm.expect(jsonData).to.have.property('success');",
                                "    pm.expect(jsonData.success).to.be.true;",
                                "    pm.expect(jsonData.data).to.have.property('user');",
                                "});"
                            ],
                            "type": "text/javascript"
                        }
                    }],
                    "request": {
                        "method": "GET",
                        "header": [{
                            "key": "Authorization",
                            "value": "Bearer {{token}}",
                            "type": "text"
                        }],
                        "url": {
                            "raw": "{{baseUrl}}/api/auth/me",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "auth",
                                "me"
                            ]
                        },
                        "description": "Get current authenticated user information. Requires authentication token."
                    },
                    "response": []
                },
                {
                    "name": "Refresh Token",
                    "event": [{
                        "listen": "test",
                        "script": {
                            "exec": [
                                "if (pm.response.code === 200) {",
                                "    const jsonData = pm.response.json();",
                                "    if (jsonData.success && jsonData.data && jsonData.data.token) {",
                                "        pm.collectionVariables.set(\"token\", jsonData.data.token);",
                                "        console.log(\"New token saved:\", jsonData.data.token);",
                                "    }",
                                "}",
                                "",
                                "pm.test(\"Status code is 200\", function () {",
                                "    pm.response.to.have.status(200);",
                                "});",
                                "",
                                "pm.test(\"Response includes new token\", function () {",
                                "    const jsonData = pm.response.json();",
                                "    pm.expect(jsonData).to.have.property('success');",
                                "    pm.expect(jsonData.success).to.be.true;",
                                "    pm.expect(jsonData.data).to.have.property('token');",
                                "});"
                            ],
                            "type": "text/javascript"
                        }
                    }],
                    "request": {
                        "method": "POST",
                        "header": [{
                                "key": "Authorization",
                                "value": "Bearer {{token}}",
                                "type": "text"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "url": {
                            "raw": "{{baseUrl}}/api/auth/refresh",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "auth",
                                "refresh"
                            ]
                        },
                        "description": "Refresh JWT token. Requires authentication token."
                    },
                    "response": []
                },
                {
                    "name": "Change Password",
                    "event": [{
                        "listen": "test",
                        "script": {
                            "exec": [
                                "pm.test(\"Status code is 200\", function () {",
                                "    pm.response.to.have.status(200);",
                                "});",
                                "",
                                "pm.test(\"Response indicates success\", function () {",
                                "    const jsonData = pm.response.json();",
                                "    pm.expect(jsonData).to.have.property('success');",
                                "    pm.expect(jsonData.success).to.be.true;",
                                "});"
                            ],
                            "type": "text/javascript"
                        }
                    }],
                    "request": {
                        "method": "POST",
                        "header": [{
                                "key": "Authorization",
                                "value": "Bearer {{token}}",
                                "type": "text"
                            },
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"currentPassword\": \"password123\",\n    \"newPassword\": \"newpassword123\"\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/auth/change-password",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "auth",
                                "change-password"
                            ]
                        },
                        "description": "Change password for authenticated user. Requires: currentPassword, newPassword. Requires authentication token."
                    },
                    "response": []
                }
            ],
            "description": "User profile and account management endpoints"
        }
    ]
}